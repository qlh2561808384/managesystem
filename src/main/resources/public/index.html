<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>管理系统</title>
    <script type="text/javascript" src="../Bootstrap4.3.1/js/jquery-2.1.0.min.js"></script>
    <script type="text/javascript" src="../Bootstrap4.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../layui-v2.5.5/layui/layui.js"></script>
    <script type="text/javascript" src="../Bootstrap4.3.1/js/md5.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../Bootstrap4.3.1/css/index.css">
</head>
<body>
<!--<div class="text card">用户登陆</div>-->
<div id="div_form">
    <span class="text card">用户登陆</span>
    <form class="form-horizontal" role="form"  id="FORM">
        <div class="form-group">
            <label for="firstname" class="col-sm-2 control-label zhmm">账号</label>
            <div class="col-sm-9 zhmminput">
                <input type="text" class="form-control" id="firstname" placeholder="请输入账号">
            </div>
        </div>
        <div class="form-group">
            <label for="lastname" class="col-sm-2 control-label zhmm">密码</label>
            <div class="col-sm-9 zhmminput">
                <input type="text" class="form-control" id="lastname" placeholder="请输入密码">
            </div>
        </div>
        <div class="form-group remember">
            <div class="col-sm-offset-2 col-sm-10">
                <div class="checkbox">
                    <label>
                        <input type="checkbox"> 请记住我
                    </label>
                </div>
            </div>
        </div>
        <div  class="form-group register">
            <div class="col-sm-offset-2 col-sm-10">
                <label>
<!--                    <button type="submit" class="btn btn-default rege">注册</button>-->
                    <a class="btn btn-default rege" href="javascript:void(0)">注册</a>
                </label>
            </div>
        </div>
        <div  class="form-group forgetdiv">
            <div class="col-sm-offset-2 col-sm-10">
                <label>
<!--                    <button type="submit" class="btn btn-default forget">忘记密码</button>-->
                    <a class="btn btn-default forget" href="javascript:void(0)">忘记密码</a>
                </label>
            </div>
        </div>
        <div class="form-group submit">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="button" class="btn btn-default log" id="submitLogin">登录</button>
            </div>
        </div>
    </form>
</div>
<script type="text/javascript">
    const api = {
        login: (username,password) => {
            return new Promise((resolve, reject) => {
                $.ajax({
                    url:"login/login",
                    type:"POST",
                    data:{
                        username: username,
                        password: password
                    },
                    dataType:'json',
                    cache:false,
                    success: (data) => {
                        resolve(data);
                    },
                    error:(XMLHttpRequest, textStatus, errorThrown)=>{
                        try {
                            let response = JSON.parse(XMLHttpRequest.responseText);
                            layer.alert(response.msg + "," + response.data,{icon: 2});
                        } catch (e) {
                            layer.alert('服务器异常',{icon: 2});
                        }
                    }
                });
            });
        }
    };
    layui.use(['laydate', 'laypage', 'layer', 'table', 'carousel', 'upload', 'element', 'slider'], function () {
        var laydate = layui.laydate //日期
            , laypage = layui.laypage //分页
            , layer = layui.layer //弹层
            , table = layui.table //表格
            , carousel = layui.carousel //轮播
            , upload = layui.upload //上传
            , element = layui.element //元素操作
            , slider = layui.slider; //滑块

    });
    $("#submitLogin").click(function () {
        const username = $("#firstname").val();
        const password = $("#lastname").val();
        const pwd = $.md5(password);
        if (username === "") {
            layer.msg("用户名必填",{icon: 2});
        }else if (password === "") {
            layer.msg("密码必填",{icon: 2});
        }
        api.login(username, pwd).then((data) => {
        });
    });
</script>
</body>
</html>